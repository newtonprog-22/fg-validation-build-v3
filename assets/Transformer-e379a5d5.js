import{b as C,r as x,d as T,e as y,o as _,i as z,g as t,w as n,u as a,F as D,f as s,c as V,a as r,l as b,h as A,t as p}from"./app-f966088d.js";import{_ as I,E as v,f as h}from"./AuthenticatedLayout-5d7b23d8.js";import{E as L}from"./index-723b2cfa.js";import{E as d}from"./index-251bba08.js";import{E as N,a as u}from"./index-d9aa5180.js";import{E as R}from"./index-9b40becc.js";import{E as F}from"./index-06111068.js";import{E as K}from"./index-712e2c2c.js";import"./event-6dcbb384.js";import"./index-ecde793c.js";import"./validator-94273c73.js";import"./index-a78ed033.js";const P={class:"container pr-10"},j={class:"flex items-center mb-2 gap-2 flex-wrap"},q={class:"flex justify-end pt-2"},O=s("label",null,"RFID",-1),W={class:"pt-2"},G=s("label",null,"Material",-1),H={class:"pt-2"},J=s("label",null,"Material Description",-1),Q={class:"pt-2"},X=s("label",null,"Base Unit of Measure",-1),Y={class:"pt-2"},Z=s("label",null,"Storage Type",-1),ee={class:"pt-2"},le=s("label",null,"Storage Location",-1),ae={class:"pt-2"},te=s("label",null,"Storage Unit",-1),oe={class:"pt-2"},se=s("label",null,"Storage Bin",-1),ne={class:"pt-2"},ie=s("label",null,"Available Stock",-1),re={class:"pt-2"},de=s("label",null,"Last Movement",-1),ue={class:"pt-2"},pe=s("label",null,"Last Changed By",-1),me={class:"pt-2"},fe=s("label",null,"Inventory Record",-1),ce={class:"flex justify-end"},Se={__name:"Transformer",setup(ve){const c=C(!1),o=x({list:[]}),f=x({page:1,page_size:5,search:""}),w=C(0);T(()=>{k(),m()});const k=()=>{o.value={rfid:null,material:null,description:null,um:null,loc:null,type:null,serial_no:null,bin:null,stock:null,last_movement:null,last_changed_by:null,record:null}},U=()=>document.querySelector("#import-transformer-file").click(),E=i=>{y.post(route("import.transformer"),{file:i.target.files[0],name:name.value},{headers:{"content-type":"multipart/form-data"}}).then(l=>{console.log(l.data),l.data?h({type:"warning",message:l.data}):h({type:"success",message:"Successfully uploaded."})}).catch(()=>{h({type:"error",message:"Error importing!!!"})}).finally(()=>{m()})},m=()=>{y.get(route("transformer.show",f)).then(i=>{const l=i.data;o.list=l.data,w.value=l.total})},S=()=>{k(),c.value=!0},B=()=>{const i=o.value.id?route("transformer.update",o.value.id):route("transformer.store");y.post(i,o.value).finally(()=>{c.value=!1,m()})},M=i=>{o.value={...i},c.value=!0},$=i=>{K.confirm("Are you sure you want to delete this data?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(async()=>{y.post(route("transformer.delete",i)).finally(()=>{h({type:"success",message:"Deleted successfully"}),m()})}).catch(()=>{})};return(i,l)=>(_(),z(D,null,[t(I,null,{default:n(()=>[s("input",{id:"import-transformer-file",style:{display:"none"},type:"file",onChange:l[0]||(l[0]=e=>E(e)),accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},null,32),s("div",P,[t(a(L),{class:"m-5 w-full",shadow:"always"},{default:n(()=>[s("div",j,[i.$page.props.isAdmin||i.$page.props.permissions.some(e=>e==="save transformer")?(_(),V(a(v),{key:0,type:"primary",onClick:S},{default:n(()=>[r("New")]),_:1})):b("",!0),i.$page.props.isAdmin||i.$page.props.permissions.some(e=>e==="save transformer")?(_(),V(a(v),{key:1,type:"success",onClick:U},{default:n(()=>[r("Upload")]),_:1})):b("",!0),t(a(d),{modelValue:f.search,"onUpdate:modelValue":l[1]||(l[1]=e=>f.search=e),class:"flex-1 min-w-[200px]",placeholder:"Search here...",onKeyup:A(m,["enter","native"]),onClear:m,clearable:""},null,8,["modelValue","onKeyup"])]),t(a(N),{data:o.list,"row-key":"id","header-row-class-name":"thead-light"},{default:n(()=>[t(a(u),{"min-width":"220px",label:"RFID"},{default:n(({row:e})=>[r(p(e.rfid),1)]),_:1}),t(a(u),{"min-width":"220px",label:"Material"},{default:n(({row:e})=>[r(p(e.material),1)]),_:1}),t(a(u),{"min-width":"220px",label:"Material Description"},{default:n(({row:e})=>[r(p(e.description),1)]),_:1}),t(a(u),{"min-width":"220px",label:"Storage Location"},{default:n(({row:e})=>[r(p(e.loc),1)]),_:1}),t(a(u),{"min-width":"220px",label:"Base Unit of Measure"},{default:n(({row:e})=>[r(p(e.um),1)]),_:1}),t(a(u),{"min-width":"220px",label:"Storage Type"},{default:n(({row:e})=>[r(p(e.type),1)]),_:1}),t(a(u),{"min-width":"220px",label:"Storage Unit"},{default:n(({row:e})=>[r(p(e.serial_no),1)]),_:1}),t(a(u),{"min-width":"220px",label:"Storage Bin"},{default:n(({row:e})=>[r(p(e.bin),1)]),_:1}),t(a(u),{"min-width":"220px",label:"Available Stock"},{default:n(({row:e})=>[r(p(e.stock),1)]),_:1}),t(a(u),{"min-width":"220px",label:"Last Movement"},{default:n(({row:e})=>[r(p(e.last_movement),1)]),_:1}),t(a(u),{"min-width":"220px",label:"Last Changed by"},{default:n(({row:e})=>[r(p(e.last_changed_by),1)]),_:1}),t(a(u),{"min-width":"220px",label:"Inventory Record"},{default:n(({row:e})=>[r(p(e.record),1)]),_:1}),t(a(u),{"min-width":"170px",label:"Action",fixed:"right"},{default:n(({row:e})=>[i.$page.props.isAdmin||i.$page.props.permissions.some(g=>g==="update transformer")?(_(),V(a(v),{key:0,type:"primary",onClick:g=>M(e)},{default:n(()=>[r("Edit")]),_:2},1032,["onClick"])):b("",!0),i.$page.props.isAdmin||i.$page.props.permissions.some(g=>g==="delete transformer")?(_(),V(a(v),{key:1,type:"danger",onClick:g=>$(e.id)},{default:n(()=>[r("Delete")]),_:2},1032,["onClick"])):b("",!0)]),_:1})]),_:1},8,["data"]),s("div",q,[t(a(R),{currentPage:f.page,"onUpdate:currentPage":l[2]||(l[2]=e=>f.page=e),"page-size":f.page_size,"onUpdate:pageSize":l[3]||(l[3]=e=>f.page_size=e),"page-sizes":[5,10,50,100],background:"",layout:"total, sizes, prev, pager, next",total:w.value,onSizeChange:m,onCurrentChange:m},null,8,["currentPage","page-size","total"])])]),_:1})])]),_:1}),t(a(F),{width:"500px",modelValue:c.value,"onUpdate:modelValue":l[17]||(l[17]=e=>c.value=e),title:"Transformer"},{footer:n(()=>[s("span",ce,[t(a(v),{type:"warning",onClick:l[16]||(l[16]=e=>c.value=!1),plain:""},{default:n(()=>[r("Cancel")]),_:1}),t(a(v),{type:"success",onClick:B,plain:""},{default:n(()=>[r("Save")]),_:1})])]),default:n(()=>[s("div",null,[O,t(a(d),{modelValue:o.value.rfid,"onUpdate:modelValue":l[4]||(l[4]=e=>o.value.rfid=e)},null,8,["modelValue"])]),s("div",W,[G,t(a(d),{modelValue:o.value.material,"onUpdate:modelValue":l[5]||(l[5]=e=>o.value.material=e)},null,8,["modelValue"])]),s("div",H,[J,t(a(d),{modelValue:o.value.description,"onUpdate:modelValue":l[6]||(l[6]=e=>o.value.description=e)},null,8,["modelValue"])]),s("div",Q,[X,t(a(d),{modelValue:o.value.um,"onUpdate:modelValue":l[7]||(l[7]=e=>o.value.um=e)},null,8,["modelValue"])]),s("div",Y,[Z,t(a(d),{modelValue:o.value.type,"onUpdate:modelValue":l[8]||(l[8]=e=>o.value.type=e)},null,8,["modelValue"])]),s("div",ee,[le,t(a(d),{modelValue:o.value.loc,"onUpdate:modelValue":l[9]||(l[9]=e=>o.value.loc=e)},null,8,["modelValue"])]),s("div",ae,[te,t(a(d),{modelValue:o.value.serial_no,"onUpdate:modelValue":l[10]||(l[10]=e=>o.value.serial_no=e)},null,8,["modelValue"])]),s("div",oe,[se,t(a(d),{modelValue:o.value.bin,"onUpdate:modelValue":l[11]||(l[11]=e=>o.value.bin=e)},null,8,["modelValue"])]),s("div",ne,[ie,t(a(d),{modelValue:o.value.stock,"onUpdate:modelValue":l[12]||(l[12]=e=>o.value.stock=e)},null,8,["modelValue"])]),s("div",re,[de,t(a(d),{modelValue:o.value.last_movement,"onUpdate:modelValue":l[13]||(l[13]=e=>o.value.last_movement=e)},null,8,["modelValue"])]),s("div",ue,[pe,t(a(d),{modelValue:o.value.last_changed_by,"onUpdate:modelValue":l[14]||(l[14]=e=>o.value.last_changed_by=e)},null,8,["modelValue"])]),s("div",me,[fe,t(a(d),{modelValue:o.value.record,"onUpdate:modelValue":l[15]||(l[15]=e=>o.value.record=e)},null,8,["modelValue"])])]),_:1},8,["modelValue"])],64))}};export{Se as default};
