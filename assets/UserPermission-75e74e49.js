import{r as w,b as p,d as B,e as y,o as g,i as x,g as t,w as o,u as a,F as C,a as r,t as _,f as i,j as P,c as R}from"./app-f966088d.js";import{_ as M,a as N,E,R as T,f as k}from"./AuthenticatedLayout-5d7b23d8.js";import{E as L}from"./index-723b2cfa.js";import{E as j,a as f}from"./index-d9aa5180.js";import{E as A}from"./index-9b40becc.js";import{E as O,a as W}from"./index-ecde793c.js";import{E as $}from"./index-06111068.js";import"./event-6dcbb384.js";import"./index-251bba08.js";import"./validator-94273c73.js";import"./index-a78ed033.js";const D=i("h2",{class:"px-5 pt-4 font-semibold text-xl text-gray-800 leading-tight"}," Users Role ",-1),F={class:"flex justify-end pt-2"},I=i("label",{for:""},[r("Role "),i("span",{class:"text-red-600"},"*")],-1),q={class:"flex justify-end"},oe={__name:"UserPermission",props:["roles"],setup(z){const m=w({}),h=p(document.documentElement.clientWidth),d=p(!1),c=p(null),v=p(null),n=w({order_by:null,order_at:null,page_size:10,page:1}),b=p(0);B(()=>{u()});function U(s){s.order?(n.order_by=s.order=="ascending"?"asc":"desc",n.order_at=s.column.label):(n.order_by=null,n.order_at=null),u()}const u=()=>{y.get(route("user.with-permissions",n)).then(s=>{const l=s.data.data;m.value=l.data,b.value=l.total})},V=s=>{c.value=s.roles[0].name,v.value=s.id,d.value=!0};window.addEventListener("resize",()=>{h.value=document.documentElement.clientWidth});const S=async()=>{await y.post(route("user.update-permissions",v.value),{role:c.value}).then(s=>{k({type:"success",message:"Updated successfully"}),d.value=!1,u()}).catch(s=>{k({type:"warning",message:"Error saving update!!!"})})};return(s,l)=>(g(),x(C,null,[t(M,null,{default:o(()=>[D,t(a(L),{class:"m-5 mt-1",shadow:"always"},{default:o(()=>[t(a(j),{data:(m==null?void 0:m.value)??[],"row-key":"id",onSortChange:U,"header-row-class-name":"thead-light"},{default:o(()=>[t(a(f),{"min-width":"220px",label:"NAME",sortable:""},{default:o(({row:e})=>[r(_(e.name),1)]),_:1}),t(a(f),{"min-width":"130px",label:"EMAIL",sortable:""},{default:o(({row:e})=>[r(_(e.email),1)]),_:1}),t(a(f),{"min-width":"130px",label:"ROLE",sortable:""},{default:o(({row:e})=>[r(_(e.roles.length>0?e.roles[0].name:""),1)]),_:1}),t(a(f),{width:"157px",label:"ACTION",fixed:"right"},{default:o(({row:e})=>[t(a(N),{class:"box-item",effect:"dark",content:"Edit",placement:"top"},{default:o(()=>[t(a(E),{type:"primary",size:"small",icon:a(T),onClick:G=>V(e)},null,8,["icon","onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"]),i("div",F,[t(a(A),{currentPage:n.page,"onUpdate:currentPage":l[0]||(l[0]=e=>n.page=e),"page-size":n.page_size,"onUpdate:pageSize":l[1]||(l[1]=e=>n.page_size=e),"page-sizes":[5,10,50,100],background:"",layout:"total, sizes, prev, pager, next",total:b.value,onSizeChange:u,onCurrentChange:u},null,8,["currentPage","page-size","total"])])]),_:1})]),_:1}),t(a($),{width:h.value>700?"50%":"70%",modelValue:d.value,"onUpdate:modelValue":l[4]||(l[4]=e=>d.value=e),title:"Update User Role","close-on-click-modal":!1},{footer:o(()=>[i("span",q,[t(a(E),{type:"warning",onClick:l[3]||(l[3]=e=>d.value=!1),plain:""},{default:o(()=>[r("Cancel")]),_:1}),t(a(E),{type:"primary",onClick:S},{default:o(()=>[r("Update")]),_:1})])]),default:o(()=>[i("div",null,[I,t(a(O),{modelValue:c.value,"onUpdate:modelValue":l[2]||(l[2]=e=>c.value=e),filterable:"",placeholder:"Select Role",style:{width:"100%"}},{default:o(()=>[(g(!0),x(C,null,P(z.roles,e=>(g(),R(a(W),{label:e.name,value:e.name},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])])]),_:1},8,["width","modelValue"])],64))}};export{oe as default};
