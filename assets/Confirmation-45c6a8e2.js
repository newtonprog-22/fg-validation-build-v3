import{b as p,o as h,i as k,g as l,w as a,u as t,F as S,f as m,a as o,t as i,c as H,l as x,e as R}from"./app-bce630b7.js";import{_ as F,E as v,f as y}from"./AuthenticatedLayout-acc7ea06.js";import{E as w}from"./index-24806037.js";import{E as g,a as n}from"./index-eb68092b.js";import{E as N}from"./index-cdd68cdc.js";import{E as B}from"./index-b3e5f322.js";import"./event-e90a632a.js";import"./index-0e725776.js";const T={class:"container"},U={class:"row"},D=m("div",{class:"text-xl font-semibold m-5"},"Pending for Confirmation",-1),$=m("div",{class:"text-xl font-semibold m-5"},"Confirmed",-1),q={key:0},G=m("label",{for:""},[o("Reason "),m("span",{class:"text-red-700"},"*")],-1),M={key:0,class:"text-red-500"},j={class:"flex justify-end"},Q={__name:"Confirmation",props:["data","confirmed_data"],setup(C){const r=p(null),f=p(null),_=p(null),s=p({id:null,truck_no:null,truck_id:null,step:null,has_hold:!1});function E(){r.value=null,f.value=null,_.value=null}function b(u,d){var e;r.value=d+" Reason",s.value.id=u.id,s.value.truck_no=u.truck.truck_no,s.value.truck_id=u.truck.id,s.value.step=u.is_first?"First":"Second",s.value.has_hold=((e=u.reason)==null?void 0:e.length)>0||d=="Hold"}function V(){R.post(route("confirm",s.value.id),{is_confirmed:r.value!="Hold Reason"?1:0,reason:s.value.has_hold?f.value:null,truck_no:s.value.truck_no,truck_id:s.value.truck_id,step:s.value.step,has_hold:s.value.has_hold}).then(()=>{y({type:"success",message:(r.value!="Hold Reason"?"Confirmed":"Hold")+" Successfully"}),location.reload()}).catch(u=>{var d,e;(e=(d=u.response)==null?void 0:d.data)!=null&&e.message?_.value=u.response.data.message:y({type:"error",message:"Error confirmation!!!"})})}return(u,d)=>(h(),k(S,null,[l(F,null,{default:a(()=>[m("div",T,[m("div",U,[D,l(t(w),{class:"m-5",shadow:"always"},{default:a(()=>[l(t(g),{data:C.data,"row-key":"id","header-row-class-name":"thead-light"},{default:a(()=>[l(t(n),{"min-width":"100px",label:"Truck No."},{default:a(({row:e})=>[o(i(e.truck.truck_no),1)]),_:1}),l(t(n),{"min-width":"150px",label:"Guard"},{default:a(({row:e})=>[o(i(e.requested_by.name),1)]),_:1}),l(t(n),{"min-width":"220px",label:"Reason"},{default:a(({row:e})=>[o(i(e.reason),1)]),_:1}),l(t(n),{"min-width":"150px",label:"User"},{default:a(({row:e})=>{var c;return[o(i((c=e.confirmed_by)==null?void 0:c.name),1)]}),_:1}),l(t(n),{"min-width":"90px",label:"Status"},{default:a(({row:e})=>[o(i(e.is_confirmed==0?"Hold":"Ready for "+(e.is_first?"Final Validation":"Delivery")),1)]),_:1}),l(t(n),{"min-width":"80px",label:"Step"},{default:a(({row:e})=>[o(i(e.is_first?"First":"Second"),1)]),_:1}),l(t(n),{"min-width":"178px",label:"Action",fixed:"right"},{default:a(({row:e})=>[e.is_confirmed==null?(h(),H(t(v),{key:0,type:"danger",onClick:c=>b(e,"Hold")},{default:a(()=>[o("Hold")]),_:2},1032,["onClick"])):x("",!0),l(t(v),{type:"success",onClick:c=>b(e,"Confirmed")},{default:a(()=>[o("Confirm")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),$,l(t(w),{class:"m-5",shadow:"always"},{default:a(()=>[l(t(g),{data:C.confirmed_data,"row-key":"id","header-row-class-name":"thead-light"},{default:a(()=>[l(t(n),{"min-width":"100px",label:"Truck No."},{default:a(({row:e})=>[o(i(e.truck.truck_no),1)]),_:1}),l(t(n),{"min-width":"150px",label:"Guard"},{default:a(({row:e})=>[o(i(e.requested_by.name),1)]),_:1}),l(t(n),{"min-width":"220px",label:"Reason"},{default:a(({row:e})=>[o(i(e.reason),1)]),_:1}),l(t(n),{"min-width":"150px",label:"User"},{default:a(({row:e})=>{var c;return[o(i((c=e.confirmed_by)==null?void 0:c.name),1)]}),_:1}),l(t(n),{"min-width":"80px",label:"Status"},{default:a(({row:e})=>[o(" Confirmed ")]),_:1}),l(t(n),{"min-width":"80px",label:"Step"},{default:a(({row:e})=>[o(i(e.is_first?"First":"Second"),1)]),_:1})]),_:1},8,["data"])]),_:1})])])]),_:1}),l(t(B),{width:"500px",modelValue:r.value,"onUpdate:modelValue":d[1]||(d[1]=e=>r.value=e),title:r.value},{footer:a(()=>[m("span",j,[l(t(v),{type:"warning",onClick:E,plain:""},{default:a(()=>[o("Cancel")]),_:1}),l(t(v),{type:"info",onClick:V,plain:""},{default:a(()=>[o("Confirm")]),_:1})])]),default:a(()=>[s.value.has_hold?(h(),k("div",q,[G,l(t(N),{modelValue:f.value,"onUpdate:modelValue":d[0]||(d[0]=e=>f.value=e)},null,8,["modelValue"]),_.value?(h(),k("div",M,i(_.value),1)):x("",!0)])):x("",!0)]),_:1},8,["modelValue","title"])],64))}};export{Q as default};
