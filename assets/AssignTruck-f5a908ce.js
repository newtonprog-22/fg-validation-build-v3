import{b as B,r as C,d as K,e as f,o as n,c as i,w as t,f as o,g as s,u as e,i as y,j as A,F as w,a as d,t as k}from"./app-bce630b7.js";import{_ as W,E as _,e as $,f as x}from"./AuthenticatedLayout-acc7ea06.js";import{E as N,a as T}from"./index-ef9711f2.js";import{E}from"./index-24806037.js";import{E as D,a as b}from"./index-eb68092b.js";import{E as V}from"./index-1b5a0d15.js";import{E as S}from"./index-8802a420.js";import"./index-cdd68cdc.js";import"./event-e90a632a.js";import"./validator-ea7cecad.js";import"./index-0e725776.js";const z={class:"container"},L={class:"row m-5"},q={class:""},G={class:"flex flex-wrap justify-between"},H=o("div",{class:"font-bold mb-2 text-center text-gray-500"},"Assigned DR Number",-1),I={class:"text-right mt-2"},J=o("div",{class:"font-bold mb-2 text-center text-gray-500"},"Unassigned DR Number",-1),re={__name:"AssignTruck",props:["trucks"],setup(U){const c=B(null),g=B(null),l=C({}),h=C({value:[]});K(()=>{p()});const p=()=>{R(),f.get(route("asset.get-assigned-unassigned")).then(({data:r})=>{l.value=r})},R=()=>{f.get(route("asset.get-unassigned-drs")).then(({data:r})=>{h.value=r})},M=()=>{S.confirm("Are you sure you want to unaassign all this dr numbers?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(async()=>{await f.post(route("asset.unassign-all-drs")).then(()=>{p()}).catch(()=>{x({type:"error",message:"Error unassigning all dr numbers!!!"})})}).catch(()=>{})};function O(){c.value=h.value.map(r=>r.dr_number)}const j=()=>{f.post(route("asset.assign-truck-api"),{dr_numbers:c.value,truck:g.value}).finally(()=>{c.value=null,g.value=null,p(),x({type:"success",message:"Successfully updated."})})};function F(r){S.confirm("Are you sure you want to unaassign this dr number?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(async()=>{await f.post(route("asset.unassign-dr",r)).then(()=>{p()}).catch(m=>{x({type:"error",message:"Error unassigning dr number!!!"})})}).catch(()=>{})}return(r,m)=>(n(),i(W,null,{default:t(()=>[o("div",z,[o("div",L,[s(e(E),{shadow:"always"},{default:t(()=>[o("span",q,[s(e(N),{modelValue:c.value,"onUpdate:modelValue":m[0]||(m[0]=a=>c.value=a),filterable:"",multiple:"",placeholder:"Select DR Numbers",clearable:""},{default:t(()=>[(n(!0),y(w,null,A(h.value,a=>(n(),i(e(T),{label:a.dr_number,value:a.dr_number},null,8,["label","value"]))),256))]),_:1},8,["modelValue"]),s(e(_),{type:"primary",class:"ml-1",onClick:O},{default:t(()=>[d(" Select All ")]),_:1})]),s(e(N),{modelValue:g.value,"onUpdate:modelValue":m[1]||(m[1]=a=>g.value=a),class:"ml-2 mr-2",filterable:"",placeholder:"Select Truck No.",clearable:""},{default:t(()=>[(n(!0),y(w,null,A(U.trucks,a=>(n(),i(e(T),{label:a.truck_no,value:a.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"]),s(e(_),{type:"success",onClick:j},{default:t(()=>[d(" Save ")]),_:1})]),_:1}),o("div",G,[s(e(E),{class:"w-full md:w-[48%] mt-5",shadow:"always"},{default:t(()=>{var a;return[H,l&&l.value&&l.value.assigned.length>0?(n(),y(w,{key:0},[s(e(D),{data:((a=l==null?void 0:l.value)==null?void 0:a.assigned)??[],"row-key":"id","header-row-class-name":"thead-light"},{default:t(()=>[s(e(b),{"min-width":"130px",label:"DR Number"},{default:t(({row:u})=>[d(k(u.dr_number),1)]),_:1}),s(e(b),{"min-width":"120px",label:"Truck No"},{default:t(({row:u})=>{var v;return[d(k((v=u.truck_info)==null?void 0:v.truck_no),1)]}),_:1}),s(e(b),{width:"70px",label:"Action"},{default:t(({row:u})=>[s(e(_),{type:"danger",size:"small",icon:e($),onClick:v=>F(u.dr_number)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"]),o("div",I,[s(e(_),{onClick:M,type:"danger"},{default:t(()=>[d("Unaassign All")]),_:1})])],64)):(n(),i(e(V),{key:1,description:"Empty assigned assets"}))]}),_:1}),s(e(E),{class:"w-full md:w-[48%] mt-5",shadow:"always"},{default:t(()=>{var a;return[J,l&&l.value&&l.value.unassigned.length>0?(n(),i(e(D),{key:0,data:((a=l==null?void 0:l.value)==null?void 0:a.unassigned)??[],"row-key":"id","header-row-class-name":"thead-light"},{default:t(()=>[s(e(b),{"min-width":"220px",label:"DR Number"},{default:t(({row:u})=>[d(k(u.dr_number),1)]),_:1})]),_:1},8,["data"])):(n(),i(e(V),{key:1,description:"Empty unassigned assets"}))]}),_:1})])])])]),_:1}))}};export{re as default};
