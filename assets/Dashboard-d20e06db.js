import{_ as D,E as C}from"./AuthenticatedLayout-5d7b23d8.js";import{b as v,r as g,d as k,e as w,o as E,i as V,g as a,w as l,u as t,F as T,f as o,t as d,a as u}from"./app-f966088d.js";import{C as R,a as A,A as P,L as S,B,b as M,P as j,p as L,c as N,d as U,e as z,f as I,D as q,g as G}from"./index-becad009.js";import{E as x}from"./index-388133d6.js";import{E as c}from"./index-723b2cfa.js";import{E as H,a as f}from"./index-d9aa5180.js";import{E as O}from"./index-06111068.js";import"./index-251bba08.js";import"./event-6dcbb384.js";import"./index-a78ed033.js";const $={class:"pt-4 px-5 pb-3"},J={class:"flex flex-wrap gap-2 items-center mb-2"},K=o("div",{class:"font-semibold text-lg"},"DR Date From:",-1),Q=o("div",{class:"text-lg font-semibold"},"DR Date To:",-1),W={class:"flex flex-wrap justify-center md:justify-between gap-2 mt-2"},X={class:"w-full md:w-fit h-fit"},Y=o("div",{class:"text-lg font-semibold"}," Pending Delivery ",-1),Z={class:"text-lg font-semibold"},ee=o("div",{class:"text-lg font-semibold"}," Month Total Sale ",-1),ae={class:"text-lg font-semibold"},te=o("div",{class:"text-center mb-2 text-sm font-semibold"}," Top 5 Items ",-1),le={class:"flex flex-wrap items-center justify-between gap-2 mt-2"},se=o("div",{class:"text-center mb-2 text-sm font-semibold"}," Top 5 Clients ",-1),oe={class:"flex justify-end"},be={__name:"Dashboard",setup(ie){R.register(A,P,S,B,M,j,L,N,U);const _=v(!1),m=v({date_from:new Date,date_until:new Date}),i=g({value:null}),p=g({value:[]});k(()=>{h()});function h(){w.get(route("dashboard.get",m.value)).then(({data:n})=>{i.value=n,console.log(n)}).catch(n=>{console.log(n)})}function y(){w.get(route("dashboard.get-pending")).then(({data:n})=>{console.log(n),p.value=n,_.value=!0}).catch(n=>{console.log(n)})}function F(){_.value=!1,p.value=[]}return(n,r)=>(E(),V(T,null,[a(D,null,{default:l(()=>[o("div",$,[o("div",J,[K,a(t(x),{modelValue:m.value.date_from,"onUpdate:modelValue":r[0]||(r[0]=e=>m.value.date_from=e),type:"date",placeholder:"DR date from",onChange:h},null,8,["modelValue"]),Q,a(t(x),{modelValue:m.value.date_until,"onUpdate:modelValue":r[1]||(r[1]=e=>m.value.date_until=e),type:"date",placeholder:"DR date to",onChange:h},null,8,["modelValue"])]),o("div",W,[o("div",X,[a(t(c),{class:"h-fit p-6 text-center mb-2 cursor-pointer",shadow:"always",onClick:y},{default:l(()=>{var e;return[Y,o("div",Z,d(((e=i.value)==null?void 0:e.pending_total)??0),1)]}),_:1}),a(t(c),{class:"h-fit p-6 text-center",shadow:"always"},{default:l(()=>{var e;return[ee,o("div",ae,d(((e=i.value)==null?void 0:e.month_total)??0),1)]}),_:1})]),a(t(c),{class:"w-full md:flex-1 h-fit",shadow:"always"},{default:l(()=>{var e,s;return[te,a(t(z),{class:"w-full",data:{labels:(e=i.value)==null?void 0:e.top_item_label,datasets:[{label:"Top 5 Items",backgroundColor:["#008000","#FF0000","#FFA500","#00FFFF","#32CD32"],data:(s=i.value)==null?void 0:s.top_item_data}]},options:{responsive:!1,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{min:0,ticks:{stepSize:1}}}}},null,8,["data"])]}),_:1})]),o("div",le,[a(t(c),{class:"w-full md:w-[48%] h-fit",shadow:"always"},{default:l(()=>{var e,s,b;return[a(t(I),{class:"w-full",data:{labels:["Matched","Missing","Mismatched"],datasets:[{label:"Total",backgroundColor:["#008000","#FF0000","#FFA500"],data:[(e=i.value)==null?void 0:e.match,(s=i.value)==null?void 0:s.missing,(b=i.value)==null?void 0:b.mismatch]}]},options:{responsive:!1,maintainAspectRatio:!1}},null,8,["data"])]}),_:1}),a(t(c),{class:"w-full md:w-[48%] h-fit",shadow:"always"},{default:l(()=>{var e,s;return[se,a(t(q),{class:"w-full",data:{labels:(e=i.value)==null?void 0:e.top_client_label,datasets:[{label:"Top 5 Customers",backgroundColor:["#008000","#FF0000","#FFA500","#00FFFF","#32CD32"],data:(s=i.value)==null?void 0:s.top_client_data}]},options:{responsive:!1,maintainAspectRatio:!1}},null,8,["data"])]}),_:1})]),a(t(c),{class:"w-full mt-2",shadow:"always"},{default:l(()=>{var e,s;return[a(t(G),{class:"w-full",data:{labels:(e=i.value)==null?void 0:e.daily_count_label,datasets:[{label:"Daily Delivired Count",borderColor:"#3498db",backgroundColor:"#008000",data:(s=i.value)==null?void 0:s.daily_count_data}]},options:{responsive:!1,maintainAspectRatio:!1,scales:{y:{min:0,ticks:{stepSize:1}}}}},null,8,["data"])]}),_:1})])]),_:1}),a(t(O),{width:"80%",modelValue:_.value,"onUpdate:modelValue":r[2]||(r[2]=e=>_.value=e),title:"Pending Delivery"},{footer:l(()=>[o("span",oe,[a(t(C),{type:"info",onClick:F,plain:""},{default:l(()=>[u("Ok")]),_:1})])]),default:l(()=>[a(t(H),{class:"w-full",data:p.value,"row-key":"id","header-row-class-name":"thead-light"},{default:l(()=>[a(t(f),{"min-width":"100px",label:"Truck No."},{default:l(({row:e})=>[u(d(e.truck.truck_no),1)]),_:1}),a(t(f),{"min-width":"150px",label:"Guard"},{default:l(({row:e})=>[u(d(e.requested_by.name),1)]),_:1}),a(t(f),{"min-width":"220px",label:"Reason"},{default:l(({row:e})=>[u(d(e.reason),1)]),_:1}),a(t(f),{"min-width":"150px",label:"User"},{default:l(({row:e})=>{var s;return[u(d((s=e.confirmed_by)==null?void 0:s.name),1)]}),_:1}),a(t(f),{"min-width":"90px",label:"Status"},{default:l(({row:e})=>[u(d(e.is_confirmed==0?"Hold":"Ready for "+(e.is_first?"Final Validation":"Delivery")),1)]),_:1}),a(t(f),{"min-width":"80px",label:"Step"},{default:l(({row:e})=>[u(d(e.is_first?"First":"Second"),1)]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"])],64))}};export{be as default};
