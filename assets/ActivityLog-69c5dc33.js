import{o as u,c as y,w as o,u as l,a as c,t as m,r as _,b as z,d as T,e as A,f as h,g as n,h as I,i as f,j as b,F as w}from"./app-bce630b7.js";import{E as C,a as D,_ as B,d as F,c as L,b as M}from"./AuthenticatedLayout-acc7ea06.js";import{E as N}from"./index-cdd68cdc.js";import{E,a as v}from"./index-ef9711f2.js";import{E as R}from"./index-d54826fb.js";import{E as $,a as p}from"./index-eb68092b.js";import{E as P}from"./index-6675a1c3.js";import{E as O}from"./index-24806037.js";import"./event-e90a632a.js";import"./validator-ea7cecad.js";const V={__name:"ResponsiveButton",props:["title","icon","type","plain","windowWidth"],setup(r){return(d,e)=>(u(),y(l(D),{class:"box-item",effect:"dark",content:r.title,placement:"top"},{default:o(()=>[r.windowWidth>420?(u(),y(l(C),{key:0,type:r.type,onClick:e[0]||(e[0]=g=>d.$emit("onClick")),icon:r.icon,plain:!!r.plain},{default:o(()=>[c(m(r.title??""),1)]),_:1},8,["type","icon","plain"])):(u(),y(l(C),{key:1,type:r.type,size:"small",onClick:e[1]||(e[1]=g=>d.$emit("onClick")),icon:r.icon,plain:!!r.plain},null,8,["type","icon","plain"]))]),_:1},8,["content"]))}},j={class:"px-5 pt-4 flex justify-between"},W=h("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Activity Log ",-1),H={class:"pt-3 px-5 flex justify-between gap-2"},K=["innerHTML"],G={class:"flex justify-end pt-2"},ne={__name:"ActivityLog",setup(r){const d=_({}),e=_({order_by:null,order_at:null,page_size:10,page:1}),g=z(0);T(()=>{i()});function k(s){const a=s.split("|");return a.length!=2?"":'<span style="color:#008080; font-weight:600"><i>'+a[0]+"</i></span> => "+a[1]}function S(s){s.order?(e.order_by=s.order=="ascending"?"asc":"desc",e.order_at=s.column.label):(e.order_by=null,e.order_at=null),i()}const i=()=>{A.get(route("activity-log.show",e)).then(s=>{const a=s.data.data;d.value=a.data,g.value=a.total})},x=s=>{if(d.value.length<1){ElMessage({type:"warning",message:"No data to export."});return}window.location.href=route("export.activity-log",{export_type:s,search:e.search,action:e.action,module:e.module,_date:e._date,order_by:e.order_by,order_at:e.order_at,page:e.page,page_size:e.page_size})};return(s,a)=>(u(),y(B,null,{default:o(()=>[h("div",j,[W,n(l(M),{class:"pl-2"},{default:o(()=>[n(V,{title:"Excel",type:"success",icon:l(F),onOnClick:a[0]||(a[0]=t=>x("excel")),windowWidth:701},null,8,["icon"]),n(V,{title:"CSV",type:"info",icon:l(L),onOnClick:x,windowWidth:701},null,8,["icon"])]),_:1})]),h("div",H,[n(l(N),{modelValue:e.search,"onUpdate:modelValue":a[1]||(a[1]=t=>e.search=t),placeholder:"Search here.",onKeyup:I(i,["enter"]),onClear:i,type:"text",clearable:""},null,8,["modelValue","onKeyup"]),n(l(E),{modelValue:e.action,"onUpdate:modelValue":a[2]||(a[2]=t=>e.action=t),onChange:i,onClear:i,placeholder:"Select action here.",filterable:"",clearable:"",style:{"min-width":"160px"}},{default:o(()=>[(u(),f(w,null,b(["Created","Updated","Deleted","Created on Import","Updated on Import","DR Number Assigning","DR Number Unassigning","Assign RFID","Scanned","Confirm","Hold","Role Updated"],t=>n(l(v),{key:t,label:t,value:t},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),n(l(E),{modelValue:e.module,"onUpdate:modelValue":a[3]||(a[3]=t=>e.module=t),onChange:i,onClear:i,placeholder:"Select module here.",filterable:"",clearable:"",style:{"min-width":"160px"}},{default:o(()=>[(u(),f(w,null,b(["Item","Assign Truck","First Validation","Final Validation - Mobile","Final Validation - PC","FG Inventory","Confirmation","RFID Assigning","Truck","User","Role Management"],t=>n(l(v),{key:t,label:t,value:t},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),n(l(R),{modelValue:e._date,"onUpdate:modelValue":a[4]||(a[4]=t=>e._date=t),type:"date",placeholder:"Select date here.",clearable:"",onChange:i,onClear:i,style:{"max-width":"200px","min-width":"150px"}},null,8,["modelValue"])]),n(l(O),{class:"m-5 mt-1",shadow:"always"},{default:o(()=>[n(l($),{data:(d==null?void 0:d.value)??[],"row-key":"id",onSortChange:S,"header-row-class-name":"thead-light"},{default:o(()=>[n(l(p),{"min-width":"110px",label:"USER NAME"},{default:o(({row:t})=>[c(m(t.user.name),1)]),_:1}),n(l(p),{"min-width":"110px",label:"ACTION",sortable:""},{default:o(({row:t})=>[c(m(t.action),1)]),_:1}),n(l(p),{"min-width":"120px",label:"MODULE",sortable:""},{default:o(({row:t})=>[c(m(t.module),1)]),_:1}),n(l(p),{"min-width":"300px",label:"ACTIVITY",sortable:""},{default:o(({row:t})=>[(u(!0),f(w,null,b(t.activity.split("^"),U=>(u(),f("div",{innerHTML:k(U)},null,8,K))),256))]),_:1}),n(l(p),{"min-width":"140px",label:"DATE",sortable:""},{default:o(({row:t})=>[c(m(t.date),1)]),_:1})]),_:1},8,["data"]),h("div",G,[n(l(P),{currentPage:e.page,"onUpdate:currentPage":a[5]||(a[5]=t=>e.page=t),"page-size":e.page_size,"onUpdate:pageSize":a[6]||(a[6]=t=>e.page_size=t),"page-sizes":[5,10,50,100],background:"",layout:"total, sizes, prev, pager, next",total:g.value,onSizeChange:i,onCurrentChange:i},null,8,["currentPage","page-size","total"])])]),_:1})]),_:1}))}};export{ne as default};
