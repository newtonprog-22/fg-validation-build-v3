import{r as h,b as f,d as v,e as x,o as w,c as b,w as n,f as o,g as l,u as s,h as y,a as d,t as u}from"./app-f966088d.js";import{_ as E,f as V}from"./AuthenticatedLayout-5d7b23d8.js";import{E as g}from"./index-388133d6.js";import{E as C}from"./index-251bba08.js";import{E as k,a as p}from"./index-d9aa5180.js";import{E as z}from"./index-9b40becc.js";import{E as D}from"./index-723b2cfa.js";import"./event-6dcbb384.js";import"./index-ecde793c.js";import"./validator-94273c73.js";const U={class:"container"},B={class:"p-5"},N={class:"flex flex-wrap gap-2 items-center mb-2"},P=o("div",{class:"font-semibold text-lg"},"Date From:",-1),S=o("div",{class:"text-lg font-semibold"},"Date Until:",-1),T={class:"flex gap-2 flex-wrap items-center justify-between"},j=o("svg",{class:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1),K={class:"flex justify-end pt-2"},O={__name:"History",setup(M){const i=h({value:[]}),t=f({date_from:new Date,date_until:new Date,page:1,page_size:5,search:""}),m=f(0);v(()=>{r()});const r=()=>{x.get(route("history.get",t.value)).then(c=>{const a=c.data;i.value=a.data,m.value=a.total})},_=()=>{if(i.value.length<1){V({type:"warning",message:"No data to export."});return}window.location.href=route("export.inventory",t.value)};return(c,a)=>(w(),b(E,null,{default:n(()=>[o("div",U,[o("div",B,[o("div",N,[P,l(s(g),{modelValue:t.value.date_from,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.date_from=e),type:"date",placeholder:"Date from",onChange:r},null,8,["modelValue"]),S,l(s(g),{modelValue:t.value.date_until,"onUpdate:modelValue":a[1]||(a[1]=e=>t.value.date_until=e),type:"date",placeholder:"Date to",onChange:r},null,8,["modelValue"])]),o("div",T,[l(s(C),{modelValue:t.value.search,"onUpdate:modelValue":a[2]||(a[2]=e=>t.value.search=e),placeholder:"Search here...",class:"flex-1 max-w-[500px] min-w-[200px]",clearable:"",onClear:r,onKeyup:y(r,["enter"])},{prefix:n(()=>[j]),_:1},8,["modelValue","onKeyup"]),o("div",{class:"px-4 py-1 rounded-md bg-teal-700 text-white font-semibold hover:bg-teal-600 cursor-pointer",onClick:_}," Export ")]),l(s(D),{class:"mt-5",shadow:"always"},{default:n(()=>[l(s(k),{data:i.value,"row-key":"id","header-row-class-name":"thead-light"},{default:n(()=>[l(s(p),{"min-width":"220px",label:"Location"},{default:n(({row:e})=>[d(u(e.transformer.loc),1)]),_:1}),l(s(p),{"min-width":"220px",label:"Transformer Serial Number"},{default:n(({row:e})=>[d(u(e.transformer.serial_no),1)]),_:1}),l(s(p),{"min-width":"220px",label:"Date"},{default:n(({row:e})=>[d(u(e.created_at.replace("T"," ").substring(0,19)),1)]),_:1})]),_:1},8,["data"]),o("div",K,[l(s(z),{currentPage:t.value.page,"onUpdate:currentPage":a[3]||(a[3]=e=>t.value.page=e),"page-size":t.value.page_size,"onUpdate:pageSize":a[4]||(a[4]=e=>t.value.page_size=e),"page-sizes":[5,10,50,100],background:"",layout:"total, sizes, prev, pager, next",total:m.value,onSizeChange:r,onCurrentChange:r},null,8,["currentPage","page-size","total"])])]),_:1})])])]),_:1}))}};export{O as default};
